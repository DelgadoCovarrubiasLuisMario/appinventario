<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Sistema de gesti칩n de inventario, cat치logo y ventas">
    <meta name="theme-color" content="#FFB6C1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Inventario">
    <title>App Inventario - Demo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="Logo.jpeg" type="image/jpeg">
    <link rel="apple-touch-icon" href="Logo.jpeg">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="Logo.jpeg" alt="Logo" class="logo">
            </div>
            <h1>Sistema de Inventario</h1>
            <nav class="tabs">
                <button class="tab-btn active" data-section="inventario">Inventario</button>
                <button class="tab-btn" data-section="catalogo">Cat치logo</button>
                <button class="tab-btn" data-section="venta">Venta</button>
            </nav>
        </header>

        <main>
            <!-- Secci칩n Inventario -->
            <section id="inventario" class="section active">
                <div class="section-header">
                    <h2>Inventario</h2>
                    <button class="btn btn-primary" onclick="openAddProductModal()">+ Agregar Producto</button>
                </div>
                
                <div class="inventario-grid" id="inventarioGrid">
                    <!-- Los productos se cargar치n aqu칤 -->
                </div>
            </section>

            <!-- Secci칩n Cat치logo -->
            <section id="catalogo" class="section">
                <div class="section-header">
                    <h2>Cat치logo</h2>
                    <button class="btn btn-primary" onclick="exportCatalogoToPDF()">游늯 Exportar a PDF</button>
                </div>
                
                <div class="catalogo-filters">
                    <!-- Los botones de filtro se generan din치micamente -->
                </div>
                
                <div class="catalogo-grid" id="catalogoGrid">
                    <!-- Los productos se cargar치n aqu칤 -->
                </div>
            </section>

            <!-- Secci칩n Venta -->
            <section id="venta" class="section">
                <div class="section-header">
                    <h2>Ventas</h2>
                    <button class="btn btn-primary" onclick="openAddSaleModal()">+ Nueva Venta</button>
                </div>
                
                <div class="ventas-container">
                    <div class="ventas-list" id="ventasList">
                        <!-- Las ventas se cargar치n aqu칤 -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal Agregar Producto -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addProductModal')">&times;</span>
            <h2>Agregar Producto</h2>
            <form id="addProductForm" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label>Foto:</label>
                    <div style="display: flex; gap: 10px; align-items: flex-start;">
                        <input type="text" id="productFoto" placeholder="URL de imagen o selecciona desde Google Drive" required style="flex: 1;">
                        <button type="button" class="btn btn-primary btn-small" onclick="pickFromGoogleDrive('productFoto')" style="white-space: nowrap;">游늬 Google Drive</button>
                    </div>
                    <small class="form-help">Haz clic en "Google Drive" para seleccionar una imagen directamente desde tu cuenta.</small>
                </div>
                <div class="form-group">
                    <label>Categor칤a / Secci칩n:</label>
                    <input type="text" id="productCategoria" placeholder="Ej: Anillos, Collares, Pulseras, etc." required list="categorias-sugeridas">
                    <datalist id="categorias-sugeridas">
                        <option value="Anillos">
                        <option value="Collares">
                        <option value="Pulseras">
                        <option value="Aretes">
                        <option value="Dijes">
                    </datalist>
                    <small class="form-help">Puedes escribir cualquier categor칤a personalizada</small>
                </div>
                <div class="form-group">
                    <label>C칩digo del Producto:</label>
                    <input type="text" id="productCodigo" required>
                </div>
                <div class="form-group">
                    <label>Precio Venta:</label>
                    <input type="text" id="productPrecioNormal" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                </div>
                <div class="form-group">
                    <label>Precio de Contado:</label>
                    <input type="text" id="productPrecioContado" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                </div>
                <div class="form-group">
                    <label>Precio Mayoreo:</label>
                    <input type="text" id="productPrecioMayoreo" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                    <small class="form-help">Solo visible en inventario</small>
                </div>
                <div class="form-group">
                    <label>Cantidad:</label>
                    <input type="text" id="productCantidad" inputmode="numeric" pattern="[0-9,]*" required>
                </div>
                <div class="form-group">
                    <label>Comentarios / Especificaciones:</label>
                    <textarea id="productComentarios" rows="4" placeholder="Agregar especificaciones, detalles o comentarios del producto..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Agregar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addProductModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Editar Producto -->
    <div id="editProductModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editProductModal')">&times;</span>
            <h2>Editar Producto</h2>
            <form id="editProductForm" onsubmit="updateProduct(event)">
                <input type="hidden" id="editProductId">
                <div class="form-group">
                    <label>Foto:</label>
                    <div style="display: flex; gap: 10px; align-items: flex-start;">
                        <input type="text" id="editProductFoto" placeholder="URL de imagen o selecciona desde Google Drive" required style="flex: 1;">
                        <button type="button" class="btn btn-primary btn-small" onclick="pickFromGoogleDrive('editProductFoto')" style="white-space: nowrap;">游늬 Google Drive</button>
                    </div>
                    <small class="form-help">Haz clic en "Google Drive" para seleccionar una imagen directamente desde tu cuenta.</small>
                </div>
                <div class="form-group">
                    <label>Categor칤a / Secci칩n:</label>
                    <input type="text" id="editProductCategoria" placeholder="Ej: Anillos, Collares, Pulseras, etc." required list="categorias-sugeridas-edit">
                    <datalist id="categorias-sugeridas-edit">
                        <option value="Anillos">
                        <option value="Collares">
                        <option value="Pulseras">
                        <option value="Aretes">
                        <option value="Dijes">
                    </datalist>
                    <small class="form-help">Puedes escribir cualquier categor칤a personalizada</small>
                </div>
                <div class="form-group">
                    <label>C칩digo del Producto:</label>
                    <input type="text" id="editProductCodigo" required>
                </div>
                <div class="form-group">
                    <label>Precio Venta:</label>
                    <input type="text" id="editProductPrecioNormal" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                </div>
                <div class="form-group">
                    <label>Precio de Contado:</label>
                    <input type="text" id="editProductPrecioContado" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                </div>
                <div class="form-group">
                    <label>Precio Mayoreo:</label>
                    <input type="text" id="editProductPrecioMayoreo" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                    <small class="form-help">Solo visible en inventario</small>
                </div>
                <div class="form-group">
                    <label>Cantidad:</label>
                    <input type="text" id="editProductCantidad" inputmode="numeric" pattern="[0-9,]*" required>
                </div>
                <div class="form-group">
                    <label>Comentarios / Especificaciones:</label>
                    <textarea id="editProductComentarios" rows="4" placeholder="Agregar especificaciones, detalles o comentarios del producto..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editProductModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Nueva Venta -->
    <div id="addSaleModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addSaleModal')">&times;</span>
            <h2>Nueva Venta</h2>
            <form id="addSaleForm" onsubmit="addSale(event)">
                <div class="form-group">
                    <label>Cliente:</label>
                    <input type="text" id="saleCliente" required>
                </div>
                <div class="form-group">
                    <label>Producto:</label>
                    <select id="saleProducto" required>
                        <option value="">Seleccionar producto...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Cantidad:</label>
                    <input type="text" id="saleCantidad" inputmode="numeric" pattern="[0-9,]*" required>
                </div>
                <div class="form-group">
                    <label>Tipo de Venta:</label>
                    <select id="saleTipoVenta" required onchange="updateSaleTotal()">
                        <option value="normal">Venta</option>
                        <option value="contado">Contado</option>
                        <option value="mayoreo">Mayoreo</option>
                    </select>
                    <small class="form-help">El precio se seleccionar치 autom치ticamente seg칰n el tipo</small>
                </div>
                <div class="form-group">
                    <label>Total:</label>
                    <input type="text" id="saleTotal" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required readonly style="background: #f5f5f5; font-weight: bold;">
                </div>
                <div class="form-group">
                    <label>Abono Inicial:</label>
                    <input type="text" id="saleAbono" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" value="0">
                </div>
                <div class="form-group">
                    <label>Fecha:</label>
                    <input type="date" id="saleFecha" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Registrar Venta</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addSaleModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Editar Venta -->
    <div id="editSaleModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editSaleModal')">&times;</span>
            <h2>Editar Venta</h2>
            <form id="editSaleForm" onsubmit="updateSale(event)">
                <input type="hidden" id="editSaleId">
                <div class="form-group">
                    <label>Cliente:</label>
                    <input type="text" id="editSaleCliente" required>
                </div>
                <div class="form-group">
                    <label>Producto:</label>
                    <select id="editSaleProducto" required>
                        <option value="">Seleccionar producto...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Cantidad:</label>
                    <input type="text" id="editSaleCantidad" inputmode="numeric" pattern="[0-9,]*" required oninput="updateEditSaleTotal()">
                </div>
                <div class="form-group">
                    <label>Tipo de Venta:</label>
                    <select id="editSaleTipoVenta" required onchange="updateEditSaleTotal()">
                        <option value="normal">Venta</option>
                        <option value="contado">Contado</option>
                        <option value="mayoreo">Mayoreo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Total:</label>
                    <input type="text" id="editSaleTotal" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required readonly style="background: #f5f5f5; font-weight: bold;">
                </div>
                <div class="form-group">
                    <label>Fecha:</label>
                    <input type="date" id="editSaleFecha" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editSaleModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Agregar Abono -->
    <div id="addAbonoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addAbonoModal')">&times;</span>
            <h2>Agregar Abono</h2>
            <form id="addAbonoForm" onsubmit="addAbono(event)">
                <input type="hidden" id="abonoSaleId">
                <div class="form-group">
                    <label>Monto:</label>
                    <input type="text" id="abonoMonto" inputmode="decimal" pattern="[0-9,]*\.?[0-9]*" required>
                </div>
                <div class="form-group">
                    <label>Fecha:</label>
                    <input type="date" id="abonoFecha" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Agregar Abono</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addAbonoModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Google APIs -->
    <script src="https://apis.google.com/js/api.js" onload="gapiLoaded()" defer></script>
    <script src="https://accounts.google.com/gsi/client" onload="gisLoaded()" defer></script>
    
    <!-- Librer칤as para PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="app.js"></script>
</body>
</html>

